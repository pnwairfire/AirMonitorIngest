<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a 'data' dataframe with required data — epa_aqs_createLocalArchive • AirMonitorIngest</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a 'data' dataframe with required data — epa_aqs_createLocalArchive"><meta property="og:description" content="Create a local archive of  EPA AQS transofrmed into data appropriate
for use with the MazamaTimeSeries package.
The data model is that data are stored in a tibble named data with an initial
datetime column and monitor-specific data in columns identified with a
deviceDeploymentID that matches one found in the incoming meta table.
Both data and meta will be saved as `.rda`, `.csv` and `.csv.gz`
files for maximum portability to other languages like python, javascript or
even to desktop spreadsheet software.
The archive structure underneath archiveBaseDir will be:

&amp;lt;archiveBaseDir&amp;gt;/EPA_AQS/&amp;lt;parameterCode&amp;gt;/&amp;lt;year&amp;gt;/


Files will be named as:

epa_aqs_&amp;lt;parameterCode&amp;gt;_&amp;lt;year&amp;gt;_meta.[rda|csv|csv.gz]
epa_aqs_&amp;lt;parameterCode&amp;gt;_&amp;lt;year&amp;gt;_data.[rda|csv|csv.gz]

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AirMonitorIngest</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/AirMonitorIngest.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/pnwairfire/AirMonitorIngest/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a 'data' dataframe with required data</h1>
    <small class="dont-index">Source: <a href="https://github.com/pnwairfire/AirMonitorIngest/blob/HEAD/R/epa_aqs_createLocalArchive.R" class="external-link"><code>R/epa_aqs_createLocalArchive.R</code></a></small>
    <div class="hidden name"><code>epa_aqs_createLocalArchive.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a local archive of  EPA AQS transofrmed into data appropriate
for use with the <span class="pkg">MazamaTimeSeries</span> package.</p>
<p>The data model is that data are stored in a tibble named <code>data</code> with an initial
<code>datetime</code> column and monitor-specific data in columns identified with a
<code>deviceDeploymentID</code> that matches one found in the incoming <code>meta</code> table.
Both <code>data</code> and <code>meta</code> will be saved as `.rda`, `.csv` and `.csv.gz`
files for maximum portability to other languages like python, javascript or
even to desktop spreadsheet software.</p>
<p>The archive structure underneath <code>archiveBaseDir</code> will be:</p>
<div class="sourceCode"><pre><code>
&lt;archiveBaseDir&gt;/EPA_AQS/&lt;parameterCode&gt;/&lt;year&gt;/
</code></pre></div>

<p>Files will be named as:</p>
<div class="sourceCode"><pre><code>
epa_aqs_&lt;parameterCode&gt;_&lt;year&gt;_meta.[rda|csv|csv.gz]
epa_aqs_&lt;parameterCode&gt;_&lt;year&gt;_data.[rda|csv|csv.gz]
</code></pre></div>

    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">epa_aqs_createLocalArchive</span><span class="op">(</span></span>
<span>  sites_locationTbl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parameterCode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  years <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  archiveBaseDir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  downloadDir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sites_locationTbl</dt>
<dd><p>EPA AQS "known locations" table for <code>parameterCode</code> monitors.</p></dd>


<dt>parameterCode</dt>
<dd><p>EPA "Parameter Code".</p></dd>


<dt>years</dt>
<dd><p>Vector of years for which to transform data.</p></dd>


<dt>archiveBaseDir</dt>
<dd><p>Path under which the directory structure will be created.</p></dd>


<dt>downloadDir</dt>
<dd><p>Directory in which to save downloaded EPA .zip files. If <code>NULL</code>, a temp directory is used.</p></dd>


<dt>quiet</dt>
<dd><p>Logical passed on to <code><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">utils::download.file()</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns 0 on success.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Depending on your internet connection speeds, downloading files from the EPA
site can take several minutes per file. If you see warning messages that you have
timed out, please download files manually before running this function. This
function will then discover the downloaded files in the <code>downloadDir</code>.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jonathan Callahan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

